<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูููู ููููุฉ ุงูุจูู | SAWYAN</title>
    <!-- Tajawal Font -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Main Style -->
    <link rel="stylesheet" href="style.css?v=2.1">
    <link rel="stylesheet" href="sawyan.css?v=3.2">
</head>

<body>
    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <i class="fa-solid fa-chart-pie"></i>
                <h1>ูููู ููููุฉ ุงูุจูู</h1>
            </div>
            <div class="header-controls">
                <div class="project-name-container">
                    <input type="text" id="projectNameInput" value="ูููู ููููุฉ ุงูุจูู" placeholder="ุงุณู ุงููุดุฑูุน">
                    <button id="saveProjectName" title="ุญูุธ ุงูุงุณู"><i class="fa-solid fa-check"></i></button>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <main class="container">
        <!-- Initial Setup Section -->
        <section class="setup-section">
            <h2><i class="fa-solid fa-cog"></i> ุฅุนุฏุงุฏุงุช ุงูุชุฃุณูุณ</h2>
            <div class="setup-grid">
                <div class="input-group">
                    <label for="initialShares">ุนุฏุฏ ุงูุฃุณูู ุงูุงุจุชุฏุงุฆู</label>
                    <input type="number" id="initialShares" value="1000000" min="1">
                </div>
                <div class="input-group">
                    <label for="initialPrice">ุณุนุฑ ุงูุณูู ุงูุงุจุชุฏุงุฆู ($)</label>
                    <input type="number" id="initialPrice" value="0.05" step="0.01" min="0.01">
                </div>
                <div class="input-group calculated">
                    <label>ุงูุชูููู ุงูุงุจุชุฏุงุฆู</label>
                    <div class="calculated-value" id="initialValuation">$50,000</div>
                </div>
            </div>
        </section>

        <!-- Rounds Section -->
        <section class="rounds-section">
            <div class="section-header">
                <h2><i class="fa-solid fa-layer-group"></i> ุฌููุงุช ุงูุชูููู</h2>
                <button class="btn-add-round" id="addRoundBtn">
                    <i class="fa-solid fa-plus"></i> ุฅุถุงูุฉ ุฌููุฉ
                </button>
            </div>

            <div class="rounds-container" id="roundsContainer">
                <!-- Rounds will be added here dynamically -->
            </div>
        </section>

        <!-- Results Summary Section -->
        <section class="results-section" id="resultsSection" style="display: none;">
            <h2><i class="fa-solid fa-table"></i> ููุฎุต ุงููุชุงุฆุฌ</h2>
            <div class="table-wrapper">
                <table class="results-table" id="resultsTable">
                    <thead>
                        <tr>
                            <th>ุงูุฌููุฉ</th>
                            <th>ุงูุชูููุช</th>
                            <th>ูุจูุบ ุงูุชูููู</th>
                            <th>ุงูุญุตุฉ ุงููุจุงุนุฉ</th>
                            <th>ุงูุชูููู ูุจู</th>
                            <th>ุงูุชูููู ุจุนุฏ</th>
                            <th>ุณุนุฑ ุงูุณูู</th>
                            <th>ูุถุงุนู ุงูุฑุจุญ</th>
                            <th>ุฃุณูู ุงูุฌููุฉ</th>
                            <th>ุฅุฌูุงูู ุงูุฃุณูู</th>
                        </tr>
                    </thead>
                    <tbody id="resultsBody">
                    </tbody>
                </table>
            </div>

            <!-- Ownership Table -->
            <h3 style="margin-top: 2rem;"><i class="fa-solid fa-users"></i> ุฌุฏูู ุงูููููุฉ</h3>
            <div class="table-wrapper">
                <table class="results-table ownership-table" id="ownershipTable">
                    <thead>
                        <tr>
                            <th>ุงููุณุชุซูุฑ</th>
                            <th>ุงููุฏููุน</th>
                            <th>ุนุฏุฏ ุงูุฃุณูู</th>
                            <th>ุงููุณุจุฉ ุงูุญุงููุฉ</th>
                            <th>ูููุฉ ุงูููููุฉ</th>
                            <th>ุงูุฑุจุญ/ุงูุฎุณุงุฑุฉ</th>
                        </tr>
                    </thead>
                    <tbody id="ownershipBody">
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Operating Profits Section (Formerly Investor Journey) -->
        <section class="investor-journey-section" id="investorJourneySection">
            <h2><i class="fa-solid fa-chart-line"></i> ุฃุฑุจุงุญ ุงูุชุดุบูู</h2>
            <p class="section-description">ููู ุฃุฑุจุงุญ ุงูุจูู ุงูุชุดุบูููุฉ (ุงูุณูููุฉ) ูุชุฃุซูุฑูุง ุนูู ุงูุนูุงุฆุฏ ุนุจุฑ ุงูุฒูู</p>

            <!-- Hidden Profit Input (Auto-calculated from phases) -->
            <input type="hidden" id="expectedProfit" value="342218">

            <!-- Phases Settings Table -->
            <div class="phases-settings">
                <h3><i class="fa-solid fa-sliders"></i> ุฅุนุฏุงุฏุงุช ูุฑุงุญู ุงูููู</h3>
                <div class="table-container">
                    <table class="phases-table">
                        <thead>
                            <tr>
                                <th>ุงููุฑุญูุฉ</th>
                                <th>ุงูุดูุฑ</th>
                                <th>ุนุฏุฏ ุงูุฃุนุถุงุก</th>
                                <th>ุงูุฑุจุญ ุงูุณููู ($)</th>
                            </tr>
                        </thead>
                        <tbody id="phasesSettingsBody">
                            <!-- Will be populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Timeline -->
            <div class="investor-timeline">
                <h3><i class="fa-solid fa-clock"></i> ุชุทูุฑ ุฃุฑุจุงุญ ุงูุชุดุบูู</h3>

                <div class="timeline-container">
                    <div class="timeline-track">
                        <div class="timeline-point" data-phase="launch">
                            <div class="round-tag">ุฌููุฉ 2</div>
                            <div class="point-circle">
                                <i class="fa-solid fa-rocket"></i>
                            </div>
                            <div class="point-label">ุงูุดูุฑ 1</div>
                            <div class="point-sublabel">ุงูุงูุชุชุงุญ</div>
                        </div>
                        <div class="timeline-line"></div>
                        <div class="timeline-point" data-phase="breakeven">

                            <div class="point-circle">
                                <i class="fa-solid fa-equals"></i>
                            </div>
                            <div class="point-label">ุงูุดูุฑ 11</div>
                            <div class="point-sublabel">ููุทุฉ ุงูุชุนุงุฏู</div>
                        </div>
                        <div class="timeline-line"></div>
                        <div class="timeline-point active" data-phase="weak">
                            <div class="round-tag">ุฌููุฉ 4</div>
                            <div class="point-circle">
                                <i class="fa-solid fa-seedling"></i>
                            </div>
                            <div class="point-label">ุงูุดูุฑ 12</div>
                            <div class="point-sublabel">ุฃุฑุจุงุญ ุถุนููุฉ</div>
                        </div>

                        <div class="timeline-line"></div>
                        <div class="timeline-point" data-phase="good">
                            <div class="point-circle">
                                <i class="fa-solid fa-arrow-trend-up"></i>
                            </div>
                            <div class="point-label">ุงูุดูุฑ 24</div>
                            <div class="point-sublabel">ุฃุฑุจุงุญ ุฌูุฏุฉ</div>
                        </div>
                        <div class="timeline-line"></div>
                        <div class="timeline-point" data-phase="veryGood">
                            <div class="round-tag">ุฌููุฉ 5</div>
                            <div class="point-circle">
                                <i class="fa-solid fa-star"></i>
                            </div>
                            <div class="point-label">ุงูุดูุฑ 36</div>
                            <div class="point-sublabel">ุฃุฑุจุงุญ ุฌูุฏุฉ ุฌุฏุงู</div>
                        </div>
                        <div class="timeline-line"></div>
                        <div class="timeline-point" data-phase="excellent">
                            <div class="point-circle">
                                <i class="fa-solid fa-crown"></i>
                            </div>
                            <div class="point-label">ุงูุดูุฑ 48</div>
                            <div class="point-sublabel">ุฃุฑุจุงุญ ููุชุงุฒุฉ</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Phase Details -->
            <div class="phase-details" id="phaseDetails">
                <div class="phase-header">
                    <span class="phase-badge" id="phaseBadge">ูุฑุญูุฉ ุงูุชูููู</span>
                    <span class="phase-target" id="phaseTarget">ุงููุฏู: ุจูุงุก ุงููุงุนุฏุฉ ุงูุชูููุฉ</span>
                </div>

                <!-- Cards -->
                <div class="investor-cards">
                    <div class="investor-card profit-card">
                        <div class="card-icon">๐ต</div>
                        <div class="card-label">ุงูุฑุจุญ ุงูุณููู ุงููุชููุน</div>
                        <div class="card-percentage">ุงูุฅุฌูุงูู</div>
                        <div class="card-value" id="expectedProfitValue">$0</div>
                        <div class="card-note">ุฃุฑุจุงุญ ุงูุจูู ุงูุณูููุฉ ูู ูุฐู ุงููุฑุญูุฉ</div>
                    </div>

                    <div class="investor-card cash-card">
                        <div class="card-icon">๐ฐ</div>
                        <div class="card-label">ุชูุฒูุนุงุช ููุฏูุฉ</div>
                        <div class="card-percentage" id="cashPercentage">30%</div>
                        <div class="card-value" id="cashValue">$0</div>
                        <div class="card-note">ุณูููุฉ ููุฏูุฉ ูู ูุฏู ุณูููุงู</div>
                    </div>

                    <div class="investor-card reinvest-card">
                        <div class="card-icon">๐</div>
                        <div class="card-label">ุฅุนุงุฏุฉ ุงุณุชุซูุงุฑ</div>
                        <div class="card-percentage" id="reinvestPercentage">70%</div>
                        <div class="card-value" id="reinvestValue">$0</div>
                        <div class="card-note">ูููุฉ ูุถุงูุฉ ูุฑูุน ุณุนุฑ ุงูุณูู</div>
                    </div>

                    <div class="investor-card total-card">
                        <div class="card-icon">๐</div>
                        <div class="card-label">ุฑุจุญ ุงูุณูู (EPS)</div>
                        <div class="card-percentage">ููุณูู ุงููุงุญุฏ</div>
                        <div class="card-value" id="totalEPS">$0</div>
                        <div class="card-note">ุฅุฌูุงูู ุฑุจุญ ุณููู ุงูุณููู</div>
                    </div>
                </div>

                <!-- Stock Price Projection -->
                <div class="stock-projection">
                    <div class="projection-item">
                        <span class="projection-label">ุณุนุฑ ุงูุณูู ุงูุญุงูู:</span>
                        <span class="projection-value" id="currentStockPrice">$0.00</span>
                    </div>
                    <div class="projection-arrow">
                        <i class="fa-solid fa-arrow-left"></i>
                    </div>
                    <div class="projection-item highlight">
                        <span class="projection-label">ุงูุณุนุฑ ุงููุชููุน:</span>
                        <span class="projection-value" id="projectedStockPrice">$0.00</span>
                        <span class="projection-growth" id="projectedGrowth">+0%</span>
                    </div>
                </div>
            </div>

            <!-- Distribution Control + Strategy Note -->
            <div class="distribution-strategy-wrapper">
                <div class="distribution-control-bar">
                    <div class="control-item">
                        <label>ูุณุจุฉ ุงูุชูุฒูุน ุงูููุฏู (%)</label>
                        <div class="input-with-suffix">
                            <span class="suffix">%</span>
                            <input type="number" id="distributionRate" value="30" min="0" max="100" step="5"
                                style="padding-left: 35px !important; text-align: left !important;">
                        </div>
                    </div>
                    <div class="control-item">
                        <label>ุฅุนุงุฏุฉ ุงูุงุณุชุซูุงุฑ (%)</label>
                        <div class="calculated-box" id="reinvestmentRate">70%</div>
                    </div>
                </div>
                <div class="strategy-note">
                    <div class="note-icon"><i class="fa-solid fa-lightbulb"></i></div>
                    <div class="note-content">
                        <strong>ุงุณุชุฑุงุชูุฌูุฉ ุงูุนุงุฆุฏ ุงูุชุฑุงููู (30/70):</strong>
                        ุชูุฒูุน 30% ูุฃุฑุจุงุญ ููุฏูุฉ ููุฑูุฉุ ูุฅุนุงุฏุฉ ุถุฎ 70% ูุชุทููุฑ ุฃุตูู ุงูุจูู.
                        ุฃูุช ูุง ุชุฑุจุญ ูู ุงูุฏุฎู ููุทุ ุจู ูุฑุชูุน ุณููู ูู ุณูู ูููุชู $1 ุฅูู ุณูู ูููุชู $5 ูู ููุช ููุงุณู.
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer>
        <p>ุญุงุณุจุฉ ุฌููุงุช ุงูุชูููู - ุฃุฏุงุฉ ูุชุฎุทูุท ูููู ุงูููููุฉ ูุงูุงุณุชุซูุงุฑ</p>
    </footer>

    <!-- Supabase CDN for Cloud Storage -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- Cloud Storage (Supabase) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="cloud-storage.js?v=2.0_FINAL"></script>
    <script src="data.js?v=2.0_CORRECT_VALUES"></script>

    <!-- Main Calculator -->
    <script src="calculator.js?v=6.3_TIMELINE_FIX"></script>
    <script>
        // Force reload if we see the error
        window.addEventListener('error', function (e) {
            if (e.message.includes('initializeDefaultData')) {
                console.warn('Caught stale code error, forcing reload...');
                if (!localStorage.getItem('force_reloaded')) {
                    localStorage.setItem('force_reloaded', 'true');
                    location.reload(true);
                }
            }
        });
    </script>
</body>

</html>